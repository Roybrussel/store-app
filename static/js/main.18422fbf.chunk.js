(this["webpackJsonpreact-state-building-script"]=this["webpackJsonpreact-state-building-script"]||[]).push([[0],{19:function(e,t,a){e.exports=a(28)},24:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),u=a(3);a(24);function i(){return r.a.createElement("footer",null,r.a.createElement("p",null,"This site is created for demonstrative purposes only and does not offer any real products or services."),r.a.createElement("p",null,"\xa9 Pluralsight 2020"))}var o={color:"purple"};function s(){return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"},r.a.createElement("img",{alt:"Carved Rock Fitness",src:"/images/logo.png"}))),r.a.createElement("li",null,r.a.createElement(u.c,{activeStyle:o,to:"/shoes"},"Shoes")),r.a.createElement("li",null,r.a.createElement(u.c,{activeStyle:o,to:"/cart"},"Cart")))))}var m=a(2);function p(){return r.a.createElement("div",{className:"lds-container"},r.a.createElement("div",{className:"lds-dual-ring"}))}var E=a(4),d=a.n(E),f=a(7),v=Object({NODE_ENV:"production",PUBLIC_URL:"/store-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL;function h(e){var t=Object(n.useRef)(!1),a=Object(n.useState)(null),r=Object(m.a)(a,2),c=r[0],l=r[1],u=Object(n.useState)(null),i=Object(m.a)(u,2),o=i[0],s=i[1],p=Object(n.useState)(!0),E=Object(m.a)(p,2),h=E[0],b=E[1];return Object(n.useEffect)((function(){function a(){return(a=Object(f.a)(d.a.mark((function a(){var n,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch(v+e);case 3:if(!(n=a.sent).ok){a.next=11;break}return a.next=7,n.json();case 7:r=a.sent,t.current&&l(r),a.next=12;break;case 11:throw n;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),t.current&&s(a.t0);case 17:return a.prev=17,t.current&&b(!1),a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[0,14,17,20]])})))).apply(this,arguments)}return t.current=!0,function(){a.apply(this,arguments)}(),function(){t.current=!1}}),[e]),{data:c,error:o,loading:h}}var b=a(1);function O(){return r.a.createElement("h1",null,"Page not found.")}function y(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(b.h)().category,i=h("products?category="+l),o=i.data,s=i.loading,E=i.error;var d=a?o.filter((function(e){return e.skus.find((function(e){return e.size===parseInt(a)}))})):o;if(E)throw E;return s?r.a.createElement(p,null):0===o.length?r.a.createElement(O,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"filters"},r.a.createElement("label",{htmlFor:"size"},"Filter by Size:")," ",r.a.createElement("select",{id:"size",value:a,onChange:function(e){return c(e.target.value)}},r.a.createElement("option",{value:""},"All sizes"),r.a.createElement("option",{value:"7"},"7"),r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"9"},"9")),a&&r.a.createElement("h2",null,"Found ",d.length," items")),r.a.createElement("section",{id:"products"},d.map((function(e){return r.a.createElement("div",{key:e.id,className:"product"},r.a.createElement(u.b,{to:"/".concat(l,"/").concat(e.id)},r.a.createElement("img",{src:"/images/".concat(e.image),alt:e.name}),r.a.createElement("h3",null,e.name),r.a.createElement("p",null,"$",e.price)))}))))}var g=a(17),j=a(5);function S(e,t){switch(t.type){case"empty":return[];case"updateQuantity":var a=t.quantity,n=t.sku;return 0===a?e.filter((function(e){return e.sku!==n})):e.map((function(e){return e.sku===n?Object(j.a)(Object(j.a)({},e),{},{quantity:a}):e}));case"add":var r=t.id,c=t.sku;return e.find((function(e){return e.sku===c}))?e.map((function(e){return e.sku===c?Object(j.a)(Object(j.a)({},e),{},{quantity:e.quantity+1}):e})):[].concat(Object(g.a)(e),[{id:r,sku:c,quantity:1}]);default:throw new Error("Unhandled action "+t.type)}}var k,C=r.a.createContext(null);try{var _;k=null!==(_=JSON.parse(localStorage.getItem("cart")))&&void 0!==_?_:[]}catch(V){console.error("The cart could not be parsed into JSON."),k=[]}function T(e){var t=Object(n.useReducer)(S,k),a=Object(m.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){return localStorage.setItem("cart",JSON.stringify(c))}),[c]);var u={cart:c,dispatch:l};return r.a.createElement(C.Provider,{value:u},e.children)}function P(){var e=Object(n.useContext)(C);if(!e)throw new Error("useCart must be used within a CartProvider. Wrap a parent component in <CartProvider> to fix this error.");return e}function w(){var e=P().dispatch,t=Object(b.h)().id,a=Object(b.g)(),c=Object(n.useState)(""),l=Object(m.a)(c,2),u=l[0],i=l[1],o=h("products/".concat(t)),s=o.data,E=o.loading,d=o.error;if(E)return r.a.createElement(p,null);if(!s)return r.a.createElement(O,null);if(d)throw d;return r.a.createElement("div",{id:"detail"},r.a.createElement("h1",null,s.name),r.a.createElement("p",null,s.description),r.a.createElement("p",{id:"price"},"$",s.price),r.a.createElement("select",{id:"size",value:u,onChange:function(e){return i(e.target.value)}},r.a.createElement("option",{value:""},"What size?"),s.skus.map((function(e){return r.a.createElement("option",{key:e.sku,value:e.sku},e.size)}))),r.a.createElement("p",null,r.a.createElement("button",{disabled:!u,className:"btn btn-primary",onClick:function(){e({type:"add",id:t,sku:u}),a("/cart")}},"Add to cart")),r.a.createElement("img",{src:"/images/".concat(s.image),alt:s.category}))}function I(){var e=P(),t=e.cart,a=e.dispatch,c=Object(b.g)(),l=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!0),u=Object(m.a)(l,2),i=u[0],o=u[1],s=Object(n.useState)(null),p=Object(m.a)(s,2),E=p[0],d=p[1];return Object(n.useEffect)((function(){var t=e.map((function(e){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/store-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL+e).then((function(e){if(e.ok)return e.json();throw e}))}));Promise.all(t).then((function(e){return c(e)})).catch((function(e){console.error(e),d(e)})).finally((function(){return o(!1)}))}),[]),{data:r,loading:i,error:E}}(t.map((function(e){return"products/".concat(e.id)}))),u=l.data,i=l.loading,o=l.error;if(i)return r.a.createElement(p,null);if(o)throw o;var s=t.reduce((function(e,t){return e+t.quantity}),0);return r.a.createElement("section",{id:"cart"},r.a.createElement("h1",null,"Cart"),r.a.createElement("h3",null,0===s?"Your cart is empty":"".concat(s," Item").concat(s>1?"s":""," in My Cart")),r.a.createElement("ul",null,t.map((function(e){var t=e.id,n=e.sku,c=e.quantity,l=u.find((function(e){return e.id===parseInt(t)})),i=l.price,o=l.name,s=l.image,m=l.skus.find((function(e){return e.sku===n})).size;return r.a.createElement("li",{key:n,className:"cart-item"},r.a.createElement("img",{src:"/images/".concat(s),alt:o}),r.a.createElement("div",null,r.a.createElement("h3",null,o),r.a.createElement("p",null,"$",i),r.a.createElement("p",null,"Size: ",m),r.a.createElement("p",null,r.a.createElement("select",{"aria-label":"Select quantity for ".concat(o," size ").concat(m),onChange:function(e){return a({type:"updateQuantity",sku:n,quantity:parseInt(e.target.value)})},value:c},r.a.createElement("option",{value:"0"},"Remove"),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5")))))}))),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return c("/checkout")}},"Checkout"))}var A=a(9),N=Object({NODE_ENV:"production",PUBLIC_URL:"/store-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL;function x(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(N+"shippingAddress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R="IDLE",U="SUBMITTED",W="SUBMITTING",q="COMPLETED",z={city:"",country:""};function B(){var e=P().dispatch,t=Object(n.useState)(z),a=Object(m.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(R),i=Object(m.a)(u,2),o=i[0],s=i[1],p=Object(n.useState)(null),E=Object(m.a)(p,2),v=E[0],h=E[1],b=Object(n.useState)({}),O=Object(m.a)(b,2),y=O[0],g=O[1],S=function(e){var t={};e.city||(t.city="City is required");e.country||(t.country="Country is required");return t}(c),k=0===Object.keys(S).length;function C(e){e.persist(),l((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(A.a)({},e.target.id,e.target.value))}))}function _(e){e.persist(),g((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(A.a)({},e.target.id,!0))}))}function T(){return(T=Object(f.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s(W),!k){t.next=15;break}return t.prev=3,t.next=6,x(c);case 6:e({type:"empty"}),s(q),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),h(t.t0);case 13:t.next=16;break;case 15:s(U);case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}if(v)throw v;return o===q?r.a.createElement("h1",null,"Thanks for shopping!"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Shipping Info"),!k&&o===U&&r.a.createElement("div",{role:"alert"},r.a.createElement("p",null,"Please fix the following errors:"),r.a.createElement("ul",null,Object.keys(S).map((function(e){return r.a.createElement("li",{key:e},S[e])})))),r.a.createElement("form",{onSubmit:function(e){return T.apply(this,arguments)}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("br",null),r.a.createElement("input",{id:"city",type:"text",value:c.city,onBlur:_,onChange:C}),r.a.createElement("p",{role:"alert"},(y.city||o===U)&&S.city)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"country"},"Country"),r.a.createElement("br",null),r.a.createElement("select",{id:"country",value:c.country,onBlur:_,onChange:C},r.a.createElement("option",{value:""},"Select Country"),r.a.createElement("option",{value:"China"},"China"),r.a.createElement("option",{value:"India"},"India"),r.a.createElement("option",{value:"United Kingdom"},"United Kingdom"),r.a.createElement("option",{value:"USA"},"USA")),r.a.createElement("p",{role:"alert"},(y.country||o===U)&&S.country)),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save Shipping Info",disabled:o===W}))))}function F(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement(s,null),r.a.createElement("main",null,r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",element:r.a.createElement("h1",null,"Welcome to Carved Rock Fitness")}),r.a.createElement(b.a,{path:"/:category",element:r.a.createElement(y,null)}),r.a.createElement(b.a,{path:"/:category/:id",element:r.a.createElement(w,null)}),r.a.createElement(b.a,{path:"/cart",element:r.a.createElement(I,null)}),r.a.createElement(b.a,{path:"/checkout",element:r.a.createElement(B,null)})))),r.a.createElement(i,null))}var K=a(14),L=a(15),H=a(18),J=a(16),M=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(K.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(L.a)(a,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.a.Component);l.a.render(r.a.createElement(M,null,r.a.createElement(u.a,null,r.a.createElement(T,null,r.a.createElement(F,null)))),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.18422fbf.chunk.js.map