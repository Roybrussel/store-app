{"version":3,"sources":["Footer.js","Header.js","Spinner.js","services/useFetch.js","PageNotFound.js","Products.js","cartReducer.js","cartContext.js","Detail.js","Cart.js","services/useFetchAll.js","services/shippingService.js","Checkout.js","App.js","ErrorBoundary.js","index.js"],"names":["Footer","activeStyle","color","Header","to","alt","src","Spinner","className","baseUrl","process","REACT_APP_API_BASE_URL","useFetch","url","isMounted","useRef","useState","data","setData","error","setError","loading","setLoading","useEffect","a","fetch","response","ok","json","current","init","PageNotFound","Products","size","setSize","category","useParams","products","filteredProducts","filter","p","skus","find","s","parseInt","length","id","htmlFor","value","onChange","e","target","map","key","image","name","price","cartReducer","cart","action","type","quantity","sku","i","Error","initialCart","CartContext","React","createContext","JSON","parse","localStorage","getItem","console","CartProvider","props","useReducer","dispatch","setItem","stringify","contextValue","Provider","children","useCart","context","useContext","Detail","navigate","useNavigate","setSku","product","description","disabled","onClick","Cart","urls","promises","then","Promise","all","catch","finally","useFetchAll","numItemsInCart","reduce","total","item","itemInCart","aria-label","saveShippingAddress","address","method","headers","body","STATUS","emptyAddress","city","country","Checkout","setAddress","status","setStatus","saveError","setSaveError","touched","setTouched","errors","result","getErrors","isValid","Object","keys","handleChange","persist","curAddress","handleBlur","event","cur","preventDefault","role","onSubmit","onBlur","App","path","element","ErrorBoundary","state","hasError","this","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.18422fbf.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Footer() {\n  return (\n    <footer>\n      <p>\n        This site is created for demonstrative purposes only and does not offer\n        any real products or services.\n      </p>\n      <p>&copy; Pluralsight 2020</p>\n    </footer>\n  );\n}\n","import React from 'react';\nimport { Link, NavLink } from 'react-router-dom';\n\nconst activeStyle = {\n\tcolor: 'purple'\n};\n\nexport default function Header() {\n\treturn (\n\t\t<header>\n\t\t\t<nav>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t\t<img alt=\"Carved Rock Fitness\" src=\"/images/logo.png\" />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<NavLink activeStyle={activeStyle} to=\"/shoes\">\n\t\t\t\t\t\t\tShoes\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<NavLink activeStyle={activeStyle} to=\"/cart\">\n\t\t\t\t\t\t\tCart\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t</header>\n\t);\n}\n","import React from \"react\";\n\nexport default function Spinner() {\n  return (\n    <div className=\"lds-container\">\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n}\n","import { useState, useRef, useEffect } from 'react';\n\nconst baseUrl = process.env.REACT_APP_API_BASE_URL;\n\nexport default function useFetch(url) {\n\tconst isMounted = useRef(false);\n\tconst [\n\t\tdata,\n\t\tsetData\n\t] = useState(null);\n\tconst [\n\t\terror,\n\t\tsetError\n\t] = useState(null);\n\tconst [\n\t\tloading,\n\t\tsetLoading\n\t] = useState(true);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tisMounted.current = true;\n\t\t\tasync function init() {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(baseUrl + url);\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\tconst json = await response.json();\n\t\t\t\t\t\tif (isMounted.current) setData(json);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow response;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (isMounted.current) setError(e);\n\t\t\t\t} finally {\n\t\t\t\t\tif (isMounted.current) setLoading(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tinit();\n\n\t\t\treturn () => {\n\t\t\t\tisMounted.current = false;\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\turl\n\t\t]\n\t);\n\n\treturn { data, error, loading };\n}\n\nexport function Fetch({ url, children }) {\n\tconst { data, loading, error } = useFetch(url);\n\treturn children(data, loading, error);\n}\n","import React from 'react';\n\nexport default function PageNotFound() {\n\treturn <h1>Page not found.</h1>;\n}\n","import React, { useState } from \"react\";\nimport Spinner from \"./Spinner\";\nimport useFetch from \"./services/useFetch\";\nimport { useParams } from \"react-router-dom\";\nimport PageNotFound from \"./PageNotFound\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Products() {\n  const [size, setSize] = useState(\"\");\n  const { category } = useParams();\n\n  const {data: products, loading, error} = useFetch('products?category=' + category);\n\n  function renderProduct(p) { \n    return (\n      <div key={p.id} className=\"product\">\n        <Link to={`/${category}/${p.id}`}>\n          <img src={`/images/${p.image}`} alt={p.name} />\n          <h3>{p.name}</h3> \n          <p>${p.price}</p>\n        </Link>\n      </div>\n    );\n  }\n\n  const filteredProducts = size \n  ? products.filter((p) => p.skus.find((s) => s.size === parseInt(size)))\n  : products;\n\n  if (error) throw error;\n  if (loading) return <Spinner />;\n  if (products.length === 0) return <PageNotFound />;\n\n  return (\n    <>\n          <section id=\"filters\">\n            <label htmlFor=\"size\">Filter by Size:</label>{\" \"}\n            <select \n              id=\"size\" \n              value={size} \n              onChange={(e) => setSize(e.target.value)}\n            >\n              <option value=\"\">All sizes</option>\n              <option value=\"7\">7</option>\n              <option value=\"8\">8</option>\n              <option value=\"9\">9</option>\n            </select>\n            { size && <h2>Found {filteredProducts.length} items</h2>}\n          </section>\n          <section id=\"products\">\n            {filteredProducts.map(renderProduct)}\n          </section>\n        </>\n  );\n}\n","export default function cartReducer(cart, action) {\n\tswitch (action.type) {\n\t\tcase 'empty':\n\t\t\treturn [];\n\t\tcase 'updateQuantity': {\n\t\t\tconst { quantity, sku } = action;\n\t\t\treturn quantity === 0\n\t\t\t\t? cart.filter((i) => i.sku !== sku)\n\t\t\t\t: cart.map((i) => (i.sku === sku ? { ...i, quantity } : i));\n\t\t}\n\t\tcase 'add':\n\t\t\tconst { id, sku } = action;\n\t\t\tconst itemInCart = cart.find((i) => i.sku === sku);\n\t\t\tif (itemInCart) {\n\t\t\t\t// Return new array with the matching item replaced\n\t\t\t\treturn cart.map((i) => (i.sku === sku ? { ...i, quantity: i.quantity + 1 } : i));\n\t\t\t} else {\n\t\t\t\t// Return new array with the new item appended\n\t\t\t\treturn [\n\t\t\t\t\t...cart,\n\t\t\t\t\t{ id, sku, quantity: 1 }\n\t\t\t\t];\n\t\t\t}\n\t\tdefault:\n\t\t\tthrow new Error('Unhandled action ' + action.type);\n\t}\n}\n","import React, { useReducer, useEffect, useContext } from \"react\";\nimport cartReducer from \"./cartReducer\";\n\nconst CartContext = React.createContext(null);\n\nlet initialCart;\ntry {\n  initialCart = JSON.parse(localStorage.getItem(\"cart\")) ?? [];\n} catch {\n  console.error(\"The cart could not be parsed into JSON.\");\n  initialCart = [];\n}\n\nexport function CartProvider(props) {\n  const [cart, dispatch] = useReducer(cartReducer, initialCart);\n  useEffect(() => localStorage.setItem(\"cart\", JSON.stringify(cart)), [cart]);\n  const contextValue = {\n    cart,\n    dispatch,\n  };\n  return (\n    <CartContext.Provider value={contextValue}>\n      {props.children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error(\n      \"useCart must be used within a CartProvider. Wrap a parent component in <CartProvider> to fix this error.\"\n    );\n  }\n  return context;\n};","import React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport useFetch from './services/useFetch';\nimport Spinner from './Spinner';\nimport PageNotFound from './PageNotFound';\nimport { useCart } from './cartContext';\n\nexport default function Detail() {\n\tconst { dispatch } = useCart();\n\tconst { id } = useParams();\n\tconst navigate = useNavigate();\n\tconst [\n\t\tsku,\n\t\tsetSku\n\t] = useState('');\n\tconst { data: product, loading, error } = useFetch(`products/${id}`);\n\n\tif (loading) return <Spinner />;\n\tif (!product) return <PageNotFound />;\n\tif (error) throw error;\n\n\treturn (\n\t\t<div id=\"detail\">\n\t\t\t<h1>{product.name}</h1>\n\t\t\t<p>{product.description}</p>\n\t\t\t<p id=\"price\">${product.price}</p>\n\n\t\t\t<select id=\"size\" value={sku} onChange={(e) => setSku(e.target.value)}>\n\t\t\t\t<option value=\"\">What size?</option>\n\t\t\t\t{product.skus.map((s) => (\n\t\t\t\t\t<option key={s.sku} value={s.sku}>\n\t\t\t\t\t\t{s.size}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\n\t\t\t<p>\n\t\t\t\t<button\n\t\t\t\t\tdisabled={!sku}\n\t\t\t\t\tclassName=\"btn btn-primary\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tdispatch({ type: 'add', id, sku });\n\t\t\t\t\t\tnavigate('/cart');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tAdd to cart\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t\t<img src={`/images/${product.image}`} alt={product.category} />\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport useFetchAll from './services/useFetchAll';\nimport Spinner from './Spinner';\nimport { useCart } from './cartContext';\n\nexport default function Cart() {\n\tconst { cart, dispatch } = useCart();\n\tconst navigate = useNavigate();\n\tconst urls = cart.map((i) => `products/${i.id}`);\n\tconst { data: products, loading, error } = useFetchAll(urls);\n\n\tfunction renderItem(itemInCart) {\n\t\tconst { id, sku, quantity } = itemInCart;\n\t\tconst { price, name, image, skus } = products.find((p) => p.id === parseInt(id));\n\t\tconst { size } = skus.find((s) => s.sku === sku);\n\n\t\treturn (\n\t\t\t<li key={sku} className=\"cart-item\">\n\t\t\t\t<img src={`/images/${image}`} alt={name} />\n\t\t\t\t<div>\n\t\t\t\t\t<h3>{name}</h3>\n\t\t\t\t\t<p>${price}</p>\n\t\t\t\t\t<p>Size: {size}</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\taria-label={`Select quantity for ${name} size ${size}`}\n\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\t\ttype: 'updateQuantity',\n\t\t\t\t\t\t\t\t\tsku,\n\t\t\t\t\t\t\t\t\tquantity: parseInt(e.target.value)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tvalue={quantity}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"0\">Remove</option>\n\t\t\t\t\t\t\t<option value=\"1\">1</option>\n\t\t\t\t\t\t\t<option value=\"2\">2</option>\n\t\t\t\t\t\t\t<option value=\"3\">3</option>\n\t\t\t\t\t\t\t<option value=\"4\">4</option>\n\t\t\t\t\t\t\t<option value=\"5\">5</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t}\n\n\tif (loading) return <Spinner />;\n\tif (error) throw error;\n\n\tconst numItemsInCart = cart.reduce((total, item) => total + item.quantity, 0);\n\n\treturn (\n\t\t<section id=\"cart\">\n\t\t\t<h1>Cart</h1>\n\t\t\t<h3>\n\t\t\t\t{numItemsInCart === 0 ? (\n\t\t\t\t\t'Your cart is empty'\n\t\t\t\t) : (\n\t\t\t\t\t`${numItemsInCart} Item${numItemsInCart > 1 ? 's' : ''} in My Cart`\n\t\t\t\t)}\n\t\t\t</h3>\n\t\t\t<ul>{cart.map(renderItem)}</ul>\n\t\t\t<button className=\"btn btn-primary\" onClick={() => navigate('/checkout')}>\n\t\t\t\tCheckout\n\t\t\t</button>\n\t\t</section>\n\t);\n}\n","import { useState, useEffect } from 'react';\n\nexport default function useFetchAll(urls) {\n\tconst [\n\t\tdata,\n\t\tsetData\n\t] = useState(null);\n\tconst [\n\t\tloading,\n\t\tsetLoading\n\t] = useState(true);\n\tconst [\n\t\terror,\n\t\tsetError\n\t] = useState(null);\n\n\tuseEffect(() => {\n\t\tconst promises = urls.map((url) =>\n\t\t\tfetch(process.env.REACT_APP_API_BASE_URL + url).then((response) => {\n\t\t\t\tif (response.ok) return response.json();\n\t\t\t\tthrow response;\n\t\t\t})\n\t\t);\n\n\t\tPromise.all(promises)\n\t\t\t.then((json) => setData(json))\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.error(e);\n\t\t\t\tsetError(e);\n\t\t\t})\n\t\t\t.finally(() => setLoading(false));\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn { data, loading, error };\n}\n","const baseUrl = process.env.REACT_APP_API_BASE_URL;\n\nexport async function getShippingAddress(userId) {\n  return fetch(baseUrl + \"shippingAddress/\" + userId).then((response) => {\n    if (response.ok) return response.json();\n    throw response;\n  });\n}\n\nexport async function saveShippingAddress(address) {\n  return fetch(baseUrl + \"shippingAddress\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(address),\n  });\n}\n","import React, { useState } from \"react\";\nimport { saveShippingAddress } from \"./services/shippingService\";\nimport { useCart } from \"./cartContext\";\n\nconst STATUS = {\n  IDLE: \"IDLE\",\n  SUBMITTED: \"SUBMITTED\",\n  SUBMITTING: \"SUBMITTING\",\n  COMPLETED: \"COMPLETED\",\n};\n\n// Declaring outside component to avoid recreation on each render\nconst emptyAddress = {\n  city: \"\",\n  country: \"\",\n};\n\nexport default function Checkout() {\n  const { dispatch } = useCart();\n  const [address, setAddress] = useState(emptyAddress);\n  const [status, setStatus] = useState(STATUS.IDLE);\n  const [saveError, setSaveError] = useState(null);\n  const [touched, setTouched] = useState({});\n\n  // Derived state\n  const errors = getErrors(address);\n  const isValid = Object.keys(errors).length === 0;\n\n  function handleChange(e) {\n    e.persist(); // persist the event\n    setAddress((curAddress) => {\n      return {\n        ...curAddress,\n        [e.target.id]: e.target.value,\n      };\n    });\n  }\n\n  function handleBlur(event) {\n    event.persist();\n    setTouched((cur) => {\n      return { ...cur, [event.target.id]: true };\n    });\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setStatus(STATUS.SUBMITTING);\n    if (isValid) {\n      try {\n        await saveShippingAddress(address);\n        dispatch({type: \"empty\"});\n        setStatus(STATUS.COMPLETED);\n      } catch (e) {\n        setSaveError(e);\n      }\n    } else {\n      setStatus(STATUS.SUBMITTED);\n    }\n  }\n\n  function getErrors(address) {\n    const result = {};\n    if (!address.city) result.city = \"City is required\";\n    if (!address.country) result.country = \"Country is required\";\n    return result;\n  }\n\n  if (saveError) throw saveError;\n  if (status === STATUS.COMPLETED) {\n    return <h1>Thanks for shopping!</h1>;\n  }\n\n  return (\n    <>\n      <h1>Shipping Info</h1>\n      {!isValid && status === STATUS.SUBMITTED && (\n        <div role=\"alert\">\n          <p>Please fix the following errors:</p>\n          <ul>\n            {Object.keys(errors).map((key) => {\n              return <li key={key}>{errors[key]}</li>;\n            })}\n          </ul>\n        </div>\n      )}\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"city\">City</label>\n          <br />\n          <input\n            id=\"city\"\n            type=\"text\" \n            value={address.city}\n            onBlur={handleBlur}\n            onChange={handleChange}\n          />\n          <p role=\"alert\">\n            {(touched.city || status === STATUS.SUBMITTED) && errors.city}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"country\">Country</label>\n          <br />\n          <select\n            id=\"country\"\n            value={address.country}\n            onBlur={handleBlur}\n            onChange={handleChange}\n          >\n            <option value=\"\">Select Country</option>\n            <option value=\"China\">China</option>\n            <option value=\"India\">India</option>\n            <option value=\"United Kingdom\">United Kingdom</option>\n            <option value=\"USA\">USA</option>\n          </select>\n\n          <p role=\"alert\">\n            {(touched.country || status === STATUS.SUBMITTED) && errors.country}\n          </p>\n        </div>\n\n        <div>\n          <input\n            type=\"submit\"\n            className=\"btn btn-primary\"\n            value=\"Save Shipping Info\"\n            disabled={status === STATUS.SUBMITTING}\n          />\n        </div>\n      </form>\n    </>\n  );\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Products from \"./Products\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Detail from \"./Detail\";\nimport Cart from \"./Cart\";\nimport Checkout from \"./Checkout\";\n\nexport default function App() {\n  return (\n    <>\n      <div className=\"content\">\n        <Header />\n        <main>\n          <Routes>\n            <Route path=\"/\" element={<h1>Welcome to Carved Rock Fitness</h1>} />\n            <Route path=\"/:category\" element={<Products />} />\n            <Route path=\"/:category/:id\" element={<Detail />} />\n            <Route path=\"/cart\" element={<Cart />} />\n            <Route path=\"/checkout\" element={<Checkout />} />\n          </Routes>\n        </main>\n      </div>\n      <Footer />\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default class ErrorBoundary extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { hasError: false };\n    }\n  \n    static getDerivedStateFromError(error) {\n      // Update state so the next render will show the fallback UI.\n      return { hasError: true };\n    }\n  \n    render() {\n      if (this.state.hasError) {\n        // You can render any custom fallback UI\n        return <h1>Something went wrong.</h1>;\n      }\n  \n      return this.props.children; \n    }\n  }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport ErrorBoundary from './ErrorBoundary';\nimport { CartProvider } from './cartContext';\n\nReactDOM.render(\n\t<ErrorBoundary>\n\t\t<BrowserRouter>\n\t\t\t<CartProvider>\n\t\t\t\t<App />\n\t\t\t</CartProvider>\n\t\t</BrowserRouter>\n\t</ErrorBoundary>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}